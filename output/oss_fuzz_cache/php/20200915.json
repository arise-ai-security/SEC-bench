{
  "commit": "fd4659b60e6df53bad21421672fb904e01c00384",
  "files": {
    "Dockerfile": "# Copyright 2019 Google Inc.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n################################################################################\n\nFROM gcr.io/oss-fuzz-base/base-builder\nRUN apt-get update && \\\n    apt-get install -y autoconf automake libtool bison re2c pkg-config\nRUN git clone --depth 1 --branch master https://github.com/php/php-src.git php-src\nRUN git clone https://github.com/kkos/oniguruma.git php-src/oniguruma\nWORKDIR php-src\nCOPY build.sh *.options $SRC/\n",
    "build.sh": "#!/bin/bash -eu\n# Copyright 2019 Google Inc.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n################################################################################\n\n# build oniguruma and link statically\npushd oniguruma\nautoreconf -vfi\n./configure\nmake -j$(nproc)\npopd\nexport ONIG_CFLAGS=\"-I$PWD/oniguruma/src\"\nexport ONIG_LIBS=\"-L$PWD/oniguruma/src/.libs -l:libonig.a\"\n\n# PHP's zend_function union is incompatible with the object-size sanitizer\nexport CFLAGS=\"$CFLAGS -fno-sanitize=object-size\"\nexport CXXFLAGS=\"$CXXFLAGS -fno-sanitize=object-size\"\n\n# build project\n./buildconf\n./configure \\\n    --disable-all \\\n    --enable-debug-assertions \\\n    --enable-option-checking=fatal \\\n    --enable-fuzzer \\\n    --enable-exif \\\n    --enable-mbstring \\\n    --without-pcre-jit \\\n    --disable-phpdbg \\\n    --disable-cgi \\\n    --with-pic\nmake -j$(nproc)\n\n# Generate corpuses and dictionaries.\nsapi/cli/php sapi/fuzzer/generate_all.php\n\n# Copy dictionaries to expected locations.\ncp sapi/fuzzer/dict/unserialize $OUT/php-fuzz-unserialize.dict\ncp sapi/fuzzer/dict/parser $OUT/php-fuzz-parser.dict\ncp sapi/fuzzer/json.dict $OUT/php-fuzz-json.dict\n\nFUZZERS=\"php-fuzz-json\nphp-fuzz-exif\nphp-fuzz-mbstring\nphp-fuzz-unserialize\nphp-fuzz-unserializehash\nphp-fuzz-parser\nphp-fuzz-execute\"\nfor fuzzerName in $FUZZERS; do\n\tcp sapi/fuzzer/$fuzzerName $OUT/\ndone\n# copy corpora from source\nfor fuzzerName in `ls sapi/fuzzer/corpus`; do\n\tzip -j $OUT/php-fuzz-${fuzzerName}_seed_corpus.zip sapi/fuzzer/corpus/${fuzzerName}/*\ndone\n\n",
    "cosmic.list": "deb http://archive.ubuntu.com/ubuntu/ cosmic universe\n\n",
    "project.yaml": "homepage: \"http://php.net/\"\nlanguage: c++\nprimary_contact: \"stas@php.net\"\nauto_ccs:\n - \"smalyshev@gmail.com\"\n - \"nikita.ppv@gmail.com\"\nsanitizers:\n - address\n - undefined\n - memory\narchitectures:\n - x86_64\n - i386\n"
  },
  "date": "2020-09-15T09:27:17",
  "cached_at": "2025-10-24T19:26:48.705599"
}